{
  "api_info": {
    "title": "Document Annotation System",
    "version": "1.0.0",
    "description": "Document Annotation System based on FastAPI",
    "generated_at": "2025-06-02T15:55:41.676263"
  },
  "endpoints": [
    {
      "path": "/api/auth/login",
      "method": "POST",
      "summary": "用户登录",
      "description": "用户登录接口\n\n- **username**: 用户名\n- **password**: 密码\n\n返回JWT访问令牌",
      "tags": [
        "Authentication"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/auth/register",
      "method": "POST",
      "summary": "用户注册",
      "description": "用户注册接口\n\n- **username**: 用户名（3-20个字符）\n- **password**: 密码（至少6个字符）\n- **role**: 用户角色（默认为annotator）\n\n注意：只有管理员可以注册admin和super_admin角色的用户",
      "tags": [
        "Authentication"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/auth/me",
      "method": "GET",
      "summary": "获取当前用户信息",
      "description": "获取当前登录用户的信息\n\n需要有效的JWT令牌",
      "tags": [
        "Authentication"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    },
    {
      "path": "/api/auth/refresh",
      "method": "POST",
      "summary": "刷新访问令牌",
      "description": "刷新访问令牌\n\n使用当前有效的令牌获取新的令牌",
      "tags": [
        "Authentication"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    },
    {
      "path": "/api/auth/change-password",
      "method": "POST",
      "summary": "修改密码",
      "description": "修改当前用户密码\n\n- **old_password**: 当前密码\n- **new_password**: 新密码",
      "tags": [
        "Authentication"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/users/",
      "method": "GET",
      "summary": "获取用户列表",
      "description": "获取用户列表（需要管理员权限）",
      "tags": [
        "User Management"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    },
    {
      "path": "/api/users/{user_id}",
      "method": "GET",
      "summary": "获取用户详情",
      "description": "获取用户详情",
      "tags": [
        "User Management"
      ],
      "parameters": [
        {
          "name": "user_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/users/{user_id}",
      "method": "PUT",
      "summary": "更新用户信息",
      "description": "更新用户信息",
      "tags": [
        "User Management"
      ],
      "parameters": [
        {
          "name": "user_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/users/{user_id}",
      "method": "DELETE",
      "summary": "删除用户",
      "description": "删除用户（需要超级管理员权限）",
      "tags": [
        "User Management"
      ],
      "parameters": [
        {
          "name": "user_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/",
      "method": "GET",
      "summary": "获取文件列表",
      "description": "获取文件列表，支持按类型筛选",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_type",
          "in": "query",
          "type": "",
          "required": false,
          "description": "文件类型筛选"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/upload",
      "method": "POST",
      "summary": "上传文件",
      "description": "上传单个文件",
      "tags": [
        "File Management"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/upload/batch",
      "method": "POST",
      "summary": "批量上传文件",
      "description": "批量上传文件",
      "tags": [
        "File Management"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/{file_id}",
      "method": "DELETE",
      "summary": "删除文件",
      "description": "删除文件",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/{file_id}/download",
      "method": "GET",
      "summary": "下载文件",
      "description": "下载文件",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/download/batch",
      "method": "GET",
      "summary": "批量下载文件",
      "description": "批量下载文件（返回ZIP压缩包）",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_ids",
          "in": "query",
          "type": "string",
          "required": true,
          "description": "文件ID列表，逗号分隔"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/{file_id}/preview",
      "method": "GET",
      "summary": "预览文件",
      "description": "预览文件内容",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "max_size",
          "in": "query",
          "type": "integer",
          "required": false,
          "description": "最大预览大小（字节）"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/{file_id}/validate",
      "method": "GET",
      "summary": "验证模板文件",
      "description": "验证Python模板文件",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/files/my-files",
      "method": "GET",
      "summary": "获取我的文件",
      "description": "获取当前用户上传的文件",
      "tags": [
        "File Management"
      ],
      "parameters": [
        {
          "name": "file_type",
          "in": "query",
          "type": "",
          "required": false,
          "description": "文件类型筛选"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/",
      "method": "GET",
      "summary": "获取任务列表",
      "description": "获取任务列表，支持筛选、分页和搜索",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "status",
          "in": "query",
          "type": "",
          "required": false,
          "description": "任务状态筛选"
        },
        {
          "name": "assignee_id",
          "in": "query",
          "type": "",
          "required": false,
          "description": "分配人ID筛选"
        },
        {
          "name": "creator_id",
          "in": "query",
          "type": "",
          "required": false,
          "description": "创建人ID筛选"
        },
        {
          "name": "page",
          "in": "query",
          "type": "integer",
          "required": false,
          "description": "页码"
        },
        {
          "name": "page_size",
          "in": "query",
          "type": "integer",
          "required": false,
          "description": "每页数量"
        },
        {
          "name": "search",
          "in": "query",
          "type": "",
          "required": false,
          "description": "搜索关键词"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/",
      "method": "POST",
      "summary": "创建任务",
      "description": "创建任务",
      "tags": [
        "Task Management"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/statistics",
      "method": "GET",
      "summary": "获取任务统计",
      "description": "获取任务统计信息",
      "tags": [
        "Task Management"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    },
    {
      "path": "/api/tasks/{task_id}",
      "method": "GET",
      "summary": "获取任务详情",
      "description": "获取任务详情",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}",
      "method": "PUT",
      "summary": "更新任务",
      "description": "更新任务",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}",
      "method": "DELETE",
      "summary": "删除任务",
      "description": "删除任务",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}/documents/{document_id}/status",
      "method": "PUT",
      "summary": "更新文档状态",
      "description": "更新文档状态",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "status",
          "in": "query",
          "type": "",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}/progress",
      "method": "GET",
      "summary": "获取任务进度详情",
      "description": "获取任务进度详情",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}/export",
      "method": "POST",
      "summary": "导出任务数据",
      "description": "导出任务数据",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/tasks/{task_id}/template/fields",
      "method": "GET",
      "summary": "获取任务模板字段",
      "description": "获取任务模板字段信息",
      "tags": [
        "Task Management"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents",
      "method": "GET",
      "summary": "获取任务文档列表",
      "description": "获取任务包含的所有文档列表",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "status_filter",
          "in": "query",
          "type": "",
          "required": false,
          "description": "按状态过滤"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/content",
      "method": "GET",
      "summary": "获取文档内容",
      "description": "获取原始JSON文档内容",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/form-config",
      "method": "GET",
      "summary": "获取标注表单配置",
      "description": "根据模板动态生成表单字段配置",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/progress",
      "method": "GET",
      "summary": "获取任务进度统计",
      "description": "获取整体任务进度和当前文档进度",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "current_document_id",
          "in": "query",
          "type": "",
          "required": false,
          "description": "当前文档ID"
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/annotation",
      "method": "GET",
      "summary": "获取标注数据",
      "description": "获取标注数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/annotation",
      "method": "POST",
      "summary": "保存标注数据",
      "description": "保存标注数据（支持自动保存和手动保存）",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/submit",
      "method": "POST",
      "summary": "提交文档标注",
      "description": "提交标注（标记文档为已完成状态）",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/review",
      "method": "GET",
      "summary": "获取复审数据",
      "description": "获取复审数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/documents/{document_id}/review",
      "method": "POST",
      "summary": "提交复审",
      "description": "提交复审",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/validate",
      "method": "POST",
      "summary": "验证标注数据",
      "description": "验证标注数据是否符合模板定义",
      "tags": [
        "Annotation"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/validate-partial",
      "method": "POST",
      "summary": "验证部分标注数据",
      "description": "验证部分标注数据（用于实时验证）",
      "tags": [
        "Annotation"
      ],
      "parameters": [],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/{document_id}",
      "method": "GET",
      "summary": "获取标注数据",
      "description": "获取指定任务和文档的标注数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/{document_id}",
      "method": "POST",
      "summary": "保存标注数据",
      "description": "保存标注数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/{document_id}",
      "method": "PUT",
      "summary": "更新标注数据",
      "description": "更新标注数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/api/annotations/{task_id}/{document_id}",
      "method": "DELETE",
      "summary": "删除标注数据",
      "description": "删除标注数据",
      "tags": [
        "Annotation"
      ],
      "parameters": [
        {
          "name": "task_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        },
        {
          "name": "document_id",
          "in": "path",
          "type": "string",
          "required": true,
          "description": ""
        }
      ],
      "responses": {
        "200": "Successful Response",
        "422": "Validation Error"
      }
    },
    {
      "path": "/",
      "method": "GET",
      "summary": "Root Path",
      "description": "Root path, returns system information",
      "tags": [],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    },
    {
      "path": "/health",
      "method": "GET",
      "summary": "Health Check",
      "description": "Health check endpoint",
      "tags": [],
      "parameters": [],
      "responses": {
        "200": "Successful Response"
      }
    }
  ]
}